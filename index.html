<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Typing Sky Game - Fast Mode</title>
<style>
  body {
    margin: 0;
    overflow: hidden;
    background: linear-gradient(to top, #4da6ff, #99ccff);
    font-family: monospace;
    user-select: none;
  }

  #gameCanvas { display: block; width: 100vw; height: 100vh; }

  #score, #level, #lives {
    position: absolute;
    left: 10px;
    color: white;
    font-size: 20px;
    text-shadow: 0 0 4px #000;
  }

  #score { top: 10px; }
  #level { top: 40px; }
  #lives { top: 70px; }

  #levelUp, #gameOver {
    position: absolute;
    top: 40%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: yellow;
    font-size: 60px;
    opacity: 0;
    transition: opacity 0.5s ease;
    text-align: center;
    text-shadow: 0 0 10px #000;
  }

  #gameOver span { display: block; font-size: 80px; margin-top: 20px; }

  #restartBtn {
    display: none;
    position: absolute;
    top: 60%;
    left: 50%;
    transform: translate(-50%, -50%);
    padding: 12px 24px;
    font-size: 24px;
    border: none;
    border-radius: 8px;
    background-color: #ffcc00;
    cursor: pointer;
  }

  #tapStart {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: white;
    font-size: 24px;
    text-align: center;
    text-shadow: 0 0 4px #000;
    cursor: pointer;
  }

  #inputField {
    position: absolute;
    top: 0;
    left: 0;
    width: 1px;
    height: 1px;
    opacity: 0.01;
    z-index: -1;
  }
</style>
</head>
<body>
<canvas id="gameCanvas"></canvas>
<div id="score">Score: 0</div>
<div id="level">Level: 1</div>
<div id="lives">Lives: 3</div>
<div id="levelUp">LEVEL UP!</div>
<div id="gameOver">
  GAME OVER
  <span>💀</span>
</div>
<div id="tapStart">Tap to Start Typing</div>
<button id="restartBtn">Restart Game</button>
<input type="text" id="inputField" />

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

// 📚 Words
const words = [
"code","fast","type","game","sky","birds","speed","focus","react","skill",
"storm","cloud","fire","water","earth","stone","leaf","tree","sun","moon",
"jump","run","play","fun","joy","win","lose","hope","dream","wish","plan",
"build","create","grow","travel","explore","find","seek","catch","throw","kick",
"quick","brown","fox","jumps","lazy","dog","light","dark","rain","shine",
"wind","snow","hail","stormy","wave","ocean","river","mountain","valley","peak",
"happy","sad","angry","calm","brave","smart","strong","weak","gentle","wild",
"hello","world","friend","enemy","love","hate","truth","lie","clear","fog",
"apple","banana","orange","grape","lemon","lime","melon","berry","mango","peach",
"table","chair","floor","door","window","roof","wall","clock","lamp","pen",
"write","read","think","learn","teach","study","test","pass","fail","goal",
"north","south","east","west","above","below","left","right","up","down",
"bird","cat","dog","fish","horse","sheep","duck","lion","tiger","zebra",
"blue","red","green","white","black","yellow","pink","brown","gray","gold",
"car","bike","train","plane","boat","ship","truck","bus","road","track",
"star","space","galaxy","planet","earth","mars","venus","saturn","moon","sun",
"king","queen","prince","knight","castle","crown","sword","shield","magic","quest",
"rock","paper","scissors","glove","hat","shoe","bag","ring","watch","dress",
"music","song","dance","beat","drum","piano","guitar","violin","voice","band",
"light","bright","flash","shine","glow","spark","flare","beam","blink","glint"
];

let activeWords = [];
let birds = [];
let score = 0;
let level = 1;
let fallSpeed = 1.5;
let nextLevelScore = 30;
let lives = 3;
let isGameOver = false;
let spawnInterval = null;
let animationId = null;
let spawnTime = 2000;  // initial spawn time

// 🔊 Sounds
const popSound = new Audio("https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg");
const levelUpSound = new Audio("https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg");
const lifeLostSound = new Audio("https://actions.google.com/sounds/v1/cartoon/clang.ogg");
const destroySound = new Audio("https://actions.google.com/sounds/v1/alarms/beep_short.ogg");
const gameOverSound = new Audio("https://cdn.pixabay.com/download/audio/2021/08/04/audio_07d012c391.mp3?filename=horror-ambience-6036.mp3");

// 🕊 Birds
for (let i = 0; i < 8; i++) {
  birds.push({ x: Math.random() * canvas.width, y: Math.random() * (canvas.height / 2), speed: 1 + Math.random() * 1.5 });
}

function drawBirds() {
  ctx.strokeStyle = "white";
  ctx.lineWidth = 2;
  birds.forEach(bird => {
    ctx.beginPath();
    ctx.moveTo(bird.x, bird.y);
    ctx.quadraticCurveTo(bird.x + 10, bird.y - 5, bird.x + 20, bird.y);
    ctx.moveTo(bird.x + 20, bird.y);
    ctx.quadraticCurveTo(bird.x + 30, bird.y - 5, bird.x + 40, bird.y);
    ctx.stroke();
  });
}

function updateBirds() {
  birds.forEach(bird => {
    bird.x += bird.speed;
    if (bird.x > canvas.width + 50) {
      bird.x = -50;
      bird.y = Math.random() * (canvas.height / 2);
    }
  });
}

// 🪂 Words
function spawnWord() {
  if (isGameOver) return;
  const text = words[Math.floor(Math.random() * words.length)];
  const x = Math.random() * (canvas.width - 150);
  activeWords.push({ text, x, y: 0 });

  // ⏩ Gradually decrease spawn time
  if (spawnTime > 800) {
    spawnTime -= 50;
    clearInterval(spawnInterval);
    spawnInterval = setInterval(spawnWord, spawnTime);
  }
}

function drawWords() {
  ctx.font = "24px monospace";
  ctx.fillStyle = "white";
  activeWords.forEach(word => ctx.fillText(word.text, word.x, word.y));
}

function updateWords() {
  for (let i = 0; i < activeWords.length; i++) {
    activeWords[i].y += fallSpeed;
    if (activeWords[i].y > canvas.height) {
      activeWords.splice(i, 1);
      loseLife();
      i--;
    }
  }
}

// 🔤 Typing logic
function handleLetter(letter) {
  letter = letter.toLowerCase();
  for (let i = 0; i < activeWords.length; i++) {
    const word = activeWords[i];
    if (word.text[0] === letter) {
      word.text = word.text.slice(1);
      popSound.currentTime = 0;
      popSound.play();
      score++;
      document.getElementById("score").textContent = "Score: " + score;
      if (word.text.length === 0) {
        activeWords.splice(i, 1);
        destroySound.currentTime = 0;
        destroySound.play();
        checkLevelUp();
      }
      return;
    }
  }
}

function checkLevelUp() {
  if (score >= nextLevelScore) {
    level++;
    fallSpeed += 1.5;
    nextLevelScore += 40;

    // 💨 Speed boost on level up
    if (spawnInterval) {
      clearInterval(spawnInterval);
      spawnTime = Math.max(800, spawnTime - 200);
      spawnInterval = setInterval(spawnWord, spawnTime);
    }

    document.getElementById("level").textContent = "Level: " + level;
    levelUpSound.currentTime = 0;
    levelUpSound.play();
    const div = document.getElementById("levelUp");
    div.style.opacity = "1";
    setTimeout(() => div.style.opacity = "0", 1000);
  }
}

function loseLife() {
  lives--;
  lifeLostSound.currentTime = 0;
  lifeLostSound.play();
  document.getElementById("lives").textContent = "Lives: " + lives;
  if (lives <= 0) endGame();
}

function endGame() {
  isGameOver = true;
  document.getElementById("gameOver").style.opacity = "1";
  document.getElementById("restartBtn").style.display = "block";
  gameOverSound.currentTime = 0;
  gameOverSound.play();
  if (spawnInterval) {
    clearInterval(spawnInterval);
    spawnInterval = null;
  }
  cancelAnimationFrame(animationId);
}

// 🔁 Restart
document.getElementById("restartBtn").addEventListener("click", () => {
  score = 0;
  level = 1;
  fallSpeed = 1.5;
  nextLevelScore = 30;
  lives = 3;
  activeWords = [];
  isGameOver = false;
  spawnTime = 2000;
  document.getElementById("score").textContent = "Score: 0";
  document.getElementById("level").textContent = "Level: 1";
  document.getElementById("lives").textContent = "Lives: 3";
  document.getElementById("gameOver").style.opacity = "0";
  document.getElementById("restartBtn").style.display = "none";
  document.getElementById("tapStart").style.display = "block";
  if (spawnInterval) clearInterval(spawnInterval);
  spawnInterval = null;
  cancelAnimationFrame(animationId);
});

// 🧑‍💻 Input
const input = document.getElementById("inputField");
input.addEventListener("input", e => {
  const letter = e.target.value;
  if (letter) handleLetter(letter);
  e.target.value = "";
});

// 📱 Tap to start
const tapStart = document.getElementById("tapStart");
tapStart.addEventListener("click", () => {
  input.style.width = "100px";
  input.style.height = "30px";
  input.style.opacity = "0.5";
  input.style.zIndex = "1000";
  input.focus();

  setTimeout(() => {
    input.style.width = "1px";
    input.style.height = "1px";
    input.style.opacity = "0.01";
    input.style.zIndex = "-1";
  }, 500);

  tapStart.style.display = "none";
  startGame();
});

function startGame() {
  if (spawnInterval) clearInterval(spawnInterval);
  spawnInterval = setInterval(spawnWord, spawnTime);
  animate();
}

function animate() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  updateBirds();
  drawBirds();
  updateWords();
  drawWords();

  // 🚀 Increase fall speed gradually over time
  fallSpeed += 0.0005;

  if (!isGameOver) animationId = requestAnimationFrame(animate);
}

document.body.addEventListener("click", () => input.focus());
window.addEventListener("resize", () => {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
});
</script>
</body>
  </html>
